!function(e,n){function t(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function r(e){return"undefined"==typeof e}if(e){var l={},i=e.TraceKit,u=[].slice,c="?";l.noConflict=function(){return e.TraceKit=i,l},l.wrap=function(e){function n(){try{return e.apply(this,arguments)}catch(n){throw l.report(n),n}}return n},l.report=function(){function n(e){o(),p.push(e)}function r(e){for(var n=p.length-1;n>=0;--n)p[n]===e&&p.splice(n,1)}function i(e,n){var r=null;if(!n||l.collectWindowErrors){for(var i in p)if(t(p,i))try{p[i].apply(null,[e].concat(u.call(arguments,2)))}catch(c){r=c}if(r)throw r}}function c(e,n,t,r,u){var c=null;if(u)c=l.computeStackTrace(u);else if(g)l.computeStackTrace.augmentStackTraceWithInitialElement(g,n,t,e),c=g,g=null,m=null;else{var o={url:n,line:t,column:r};o.func=l.computeStackTrace.guessFunctionName(o.url,o.line),o.context=l.computeStackTrace.gatherContext(o.url,o.line),c={mode:"onerror",message:e,stack:[o]}}return i(c,"from window.onerror"),a?a.apply(this,arguments):!1}function o(){f!==!0&&(a=e.onerror,e.onerror=c,f=!0)}function s(n){var t=u.call(arguments,1);if(g){if(m===n)return;var r=g;g=null,m=null,i.apply(null,[r,null].concat(t))}var c=l.computeStackTrace(n);throw g=c,m=n,e.setTimeout(function(){m===n&&(g=null,m=null,i.apply(null,[c,null].concat(t)))},c.incomplete?2e3:0),n}var a,f,p=[],m=null,g=null;return s.subscribe=n,s.unsubscribe=r,s}(),l.computeStackTrace=function(){function n(n){if(!l.remoteFetching)return"";try{var t=function(){try{return new e.XMLHttpRequest}catch(n){return new e.ActiveXObject("Microsoft.XMLHTTP")}},r=t();return r.open("GET",n,!1),r.send(""),r.responseText}catch(i){return""}}function i(e){if("string"!=typeof e)return[];if(!t(k,e)){var r="",l="";try{l=document.domain}catch(i){}-1!==e.indexOf(l)&&(r=n(e)),k[e]=r?r.split("\n"):[]}return k[e]}function u(e,n){var t,l=/function ([^(]*)\(([^)]*)\)/,u=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,o="",s=10,a=i(e);if(!a.length)return c;for(var f=0;s>f;++f)if(o=a[n-f]+o,!r(o)){if(t=u.exec(o))return t[1];if(t=l.exec(o))return t[1]}return c}function o(e,n){var t=i(e);if(!t.length)return null;var u=[],c=Math.floor(l.linesOfContext/2),o=c+l.linesOfContext%2,s=Math.max(0,n-c-1),a=Math.min(t.length,n+o-1);n-=1;for(var f=s;a>f;++f)r(t[f])||u.push(t[f]);return u.length>0?u:null}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function a(e){return s(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,n){for(var t,r,l=0,u=n.length;u>l;++l)if((t=i(n[l])).length&&(t=t.join("\n"),r=e.exec(t)))return{url:n[l],line:t.substring(0,r.index).split("\n").length,column:r.index-t.lastIndexOf("\n",r.index)-1};return null}function p(e,n,t){var r,l=i(n),u=new RegExp("\\b"+s(e)+"\\b");return t-=1,l&&l.length>t&&(r=u.exec(l[t]))?r.index:null}function m(n){for(var t,r,l,i,u=[e.location.href],c=document.getElementsByTagName("script"),o=""+n,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,g=0;g<c.length;++g){var h=c[g];h.src&&u.push(h.src)}if(l=p.exec(o)){var d=l[1]?"\\s+"+l[1]:"",x=l[2].split(",").join("\\s*,\\s*");t=s(l[3]).replace(/;$/,";?"),r=new RegExp("function"+d+"\\s*\\(\\s*"+x+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else r=new RegExp(s(o).replace(/\s+/g,"\\s+"));if(i=f(r,u))return i;if(l=m.exec(o)){var v=l[1];if(t=a(l[2]),r=new RegExp("on"+v+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),i=f(r,u[0]))return i;if(r=new RegExp(t),i=f(r,u))return i}return null}function g(e){if(!e.stack)return null;for(var n,t,l=/^\s*at (.*?) ?\(((?:file|https?|chrome-extension|native|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome|\[).*?)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=e.stack.split("\n"),f=[],m=/^(.*) is undefined$/.exec(e.message),g=0,h=a.length;h>g;++g){if(n=l.exec(a[g])){var d=n[2]&&-1!==n[2].indexOf("native");t={url:d?null:n[2],func:n[1]||c,args:d?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=s.exec(a[g]))t={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=i.exec(a[g])))continue;t={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!t.func&&t.line&&(t.func=u(t.url,t.line)),t.line&&(t.context=o(t.url,t.line)),f.push(t)}return f.length?(f[0]&&f[0].line&&!f[0].column&&m?f[0].column=p(m[1],f[0].url,f[0].line):f[0].column||r(e.columnNumber)||(f[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:f}):null}function h(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,l=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),c=[],s=0;s<i.length;s+=2){var a=null;if((t=r.exec(i[s]))?a={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=l.exec(i[s]))&&(a={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),a){if(!a.func&&a.line&&(a.func=u(a.url,a.line)),a.line)try{a.context=o(a.url,a.line)}catch(f){}a.context||(a.context=[i[s+1]]),c.push(a)}}return c.length?{mode:"stacktrace",name:e.name,message:e.message,stack:c}:null}}function d(n){var r=n.message.split("\n");if(r.length<4)return null;var l,c=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,m=[],g=document.getElementsByTagName("script"),h=[];for(var d in g)t(g,d)&&!g[d].src&&h.push(g[d]);for(var x=2;x<r.length;x+=2){var v=null;if(l=c.exec(r[x]))v={url:l[2],func:l[3],args:[],line:+l[1],column:null};else if(l=s.exec(r[x])){v={url:l[3],func:l[4],args:[],line:+l[1],column:null};var y=+l[1],w=h[l[2]-1];if(w){var T=i(v.url);if(T){T=T.join("\n");var k=T.indexOf(w.innerText);k>=0&&(v.line=y+T.substring(0,k).split("\n").length)}}}else if(l=p.exec(r[x])){var b=e.location.href.replace(/#.*$/,""),E=new RegExp(a(r[x+1])),S=f(E,[b]);v={url:b,func:"",args:[],line:S?S.line:l[1],column:null}}if(v){v.func||(v.func=u(v.url,v.line));var C=o(v.url,v.line),$=C?C[Math.floor(C.length/2)]:null;v.context=C&&$.replace(/^\s*/,"")===r[x+1].replace(/^\s*/,"")?C:[r[x+1]],m.push(v)}}return m.length?{mode:"multiline",name:n.name,message:r[0],stack:m}:null}function x(e,n,t,r){var l={url:n,line:t};if(l.url&&l.line){e.incomplete=!1,l.func||(l.func=u(l.url,l.line)),l.context||(l.context=o(l.url,l.line));var i=/ '([^']+)' /.exec(r);if(i&&(l.column=p(i[1],l.url,l.line)),e.stack.length>0&&e.stack[0].url===l.url){if(e.stack[0].line===l.line)return!1;if(!e.stack[0].line&&e.stack[0].func===l.func)return e.stack[0].line=l.line,e.stack[0].context=l.context,!1}return e.stack.unshift(l),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,n){for(var t,r,i,o=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],a={},f=!1,g=v.caller;g&&!f;g=g.caller)if(g!==y&&g!==l.report){if(r={url:null,func:c,args:[],line:null,column:null},g.name?r.func=g.name:(t=o.exec(g.toString()))&&(r.func=t[1]),"undefined"==typeof r.func)try{r.func=t.input.substring(0,t.input.indexOf("{"))}catch(h){}if(i=m(g)){r.url=i.url,r.line=i.line,r.func===c&&(r.func=u(r.url,r.line));var d=/ '([^']+)' /.exec(e.message||e.description);d&&(r.column=p(d[1],i.url,i.line))}a[""+g]?f=!0:a[""+g]=!0,s.push(r)}n&&s.splice(0,n);var w={mode:"callers",name:e.name,message:e.message,stack:s};return x(w,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),w}function y(e,n){var t=null;n=null==n?0:+n;try{if(t=h(e))return t}catch(r){if(T)throw r}try{if(t=g(e))return t}catch(r){if(T)throw r}try{if(t=d(e))return t}catch(r){if(T)throw r}try{if(t=v(e,n+1))return t}catch(r){if(T)throw r}return{mode:"failed"}}function w(e){e=(null==e?0:+e)+1;try{throw new Error}catch(n){return y(n,e+1)}}var T=!1,k={};return y.augmentStackTraceWithInitialElement=x,y.guessFunctionName=u,y.gatherContext=o,y.ofCaller=w,y.getSource=i,y}(),l.extendToAsynchronousCallbacks=function(){var n=function(n){var t=e[n];e[n]=function(){var e=u.call(arguments),n=e[0];return"function"==typeof n&&(e[0]=l.wrap(n)),t.apply?t.apply(this,e):t(e[0],e[1])}};n("setTimeout"),n("setInterval")},l.remoteFetching||(l.remoteFetching=!0),l.collectWindowErrors||(l.collectWindowErrors=!0),(!l.linesOfContext||l.linesOfContext<1)&&(l.linesOfContext=11),e.TraceKit=l}}("undefined"!=typeof window?window:global),function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):e.exceptionless=n()}(this,function(e,n,t){function r(){if(!document||!document.getElementsByTagName)return null;for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++)if(e[n].src&&e[n].src.indexOf("/exceptionless")>-1)return p.Utils.parseQueryString(e[n].src.split("?").pop());return null}function l(e,n){var t=f.ExceptionlessClient["default"].createUnhandledException(new Error(e.message||(n||{}).status||"Script error"),"onerror");t.pluginContextData["@@_TraceKit.StackTrace"]=e,t.submit()}function i(e,n,t,r){var l=f.ExceptionlessClient["default"];404===n.status?l.submitNotFound(t.url):401!==n.status&&l.createUnhandledException(r,"JQuery.ajaxError").setSource(t.url).setProperty("status",n.status).setProperty("request",t.data).setProperty("response",n.responseText&&n.responseText.slice&&n.responseText.slice(0,1024)).submit()}if(!n)var n={};var u=e("./configuration/Configuration"),c=e("./services/DefaultErrorParser"),o=e("./services/DefaultModuleCollector"),s=e("./services/DefaultRequestInfoCollector"),a=e("./submission/DefaultSubmissionClient"),f=e("ExceptionlessClient"),p=e("Utils"),m=u.Configuration.defaults,g=r();return g&&(g.apiKey||g.serverUrl)&&(m.apiKey=g.apiKey,m.serverUrl=g.serverUrl),m.errorParser=new c.DefaultErrorParser,m.moduleCollector=new o.DefaultModuleCollector,m.requestInfoCollector=new s.DefaultRequestInfoCollector,m.submissionClient=new a.DefaultSubmissionClient,TraceKit.report.subscribe(l),TraceKit.extendToAsynchronousCallbacks(),"undefined"!=typeof $&&$(document)&&$(document).ajaxError(i),Error.stackTraceLimit=1/0,n});
//# sourceMappingURL=exceptionless.min.js.map